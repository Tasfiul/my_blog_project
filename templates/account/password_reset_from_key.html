{# my_blog_project/templates/account/password_reset_from_key.html #}
{% extends "blog/base.html" %}
{% load crispy_forms_tags %}
{% load account %}

{% block title %}Change Password{% endblock %}

{% block content %}
<div class="content-section">
    {% if token_fail %}
    <h2>Bad Token</h2>
    <p>The password reset link was invalid, possibly because it has already been used. Please request a <a href="{% url 'account_reset_password' %}">new password reset</a>.</p>
    {% else %}
    <h2>Change Password</h2>
    {% if form %}
    <form method="POST" action="{% url 'account_reset_password_from_key' uidb32=uidb32 token=token %}" class="password_reset_from_key">
        {% csrf_token %}
        {{ form|crispy }}
        <button class="btn btn-primary" type="submit" name="action">Change Password</button>
    </form>
    {% else %}
    <p>Your password is now changed.</p>
    {% endif %}
    {% endif %}
</div>
{% endblock %}